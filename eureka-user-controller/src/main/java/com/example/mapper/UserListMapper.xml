<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.UserListMapper">
    <select id="getUserList" resultType="com.example.vo.UserListVo">
        SELECT u.name,u.id uid,r.id rid,r.roleName,u.status,ur.id urid,s.statusName FROM USER u,role r,user_role ur,status s
        WHERE u.`id`=ur.userId AND r.`id`=ur.roleId AND u.status =s.id
        <if test="name!=null and name!=''">AND u.`name` LIKE CONCAT('%',#{name},'%')</if>
        <if test="status!=0">AND u.status=#{status}</if>
        limit #{start},#{size}
    </select>
    <select id="getUserListCount" resultType="Integer">
        SELECT count(*) FROM USER u,role r,user_role ur ,status s
        WHERE u.`id`=ur.userId AND r.`id`=ur.roleId AND u.status =s.id
        <if test="name!=null and name!=''">AND u.`name` LIKE CONCAT('%',#{name},'%')</if>
        <if test="status!=0">AND u.status=#{status}</if>
    </select>
    <select id="getStatusList" resultType="com.example.entity.Status">
       SELECT * FROM STATUS
    </select>
</mapper>